(self.webpackChunkatomic_ui=self.webpackChunkatomic_ui||[]).push([[433],{"./node_modules/css-loader/dist/runtime/api.js":module=>{"use strict";module.exports=function(cssWithMappingToString){var list=[];return list.toString=function toString(){return this.map(function(item){var content="",needLayer=void 0!==item[5];return item[4]&&(content+="@supports (".concat(item[4],") {")),item[2]&&(content+="@media ".concat(item[2]," {")),needLayer&&(content+="@layer".concat(item[5].length>0?" ".concat(item[5]):""," {")),content+=cssWithMappingToString(item),needLayer&&(content+="}"),item[2]&&(content+="}"),item[4]&&(content+="}"),content}).join("")},list.i=function i(modules,media,dedupe,supports,layer){"string"==typeof modules&&(modules=[[null,modules,void 0]]);var alreadyImportedModules={};if(dedupe)for(var k=0;k<this.length;k++){var id=this[k][0];null!=id&&(alreadyImportedModules[id]=!0)}for(var _k=0;_k<modules.length;_k++){var item=[].concat(modules[_k]);dedupe&&alreadyImportedModules[item[0]]||(void 0!==layer&&(void 0===item[5]||(item[1]="@layer".concat(item[5].length>0?" ".concat(item[5]):""," {").concat(item[1],"}")),item[5]=layer),media&&(item[2]?(item[1]="@media ".concat(item[2]," {").concat(item[1],"}"),item[2]=media):item[2]=media),supports&&(item[4]?(item[1]="@supports (".concat(item[4],") {").concat(item[1],"}"),item[4]=supports):item[4]="".concat(supports)),list.push(item))}},list}},"./node_modules/css-loader/dist/runtime/noSourceMaps.js":module=>{"use strict";module.exports=function(i){return i[1]}},"./src/app/shared/ui/organisms/scroll-overlay/scroll-overlay.component.css?ngResource":(module,__unused_webpack_exports,__webpack_require__)=>{var ___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___=__webpack_require__("./node_modules/css-loader/dist/runtime/noSourceMaps.js"),___CSS_LOADER_EXPORT___=__webpack_require__("./node_modules/css-loader/dist/runtime/api.js")(___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___);___CSS_LOADER_EXPORT___.push([module.id,'.so-root {\n  position: relative;\n  display: inline-block;\n  max-width: 100%;\n  overflow: hidden;\n  /* Colores plomo (gris) sutiles semi-transparentes */\n  --so-thumb-color-start: rgba(0, 0, 0, 0.3);\n  --so-thumb-color-end: rgba(0, 0, 0, 0.3);\n  --so-thumb-color-hover: rgba(0, 0, 0, 0.45);\n  --so-thumb-color-active: rgba(0, 0, 0, 0.6);\n  --so-track-size: 7px;\n  --so-thumb-blur: 2px;\n  --so-min-column-width: 140px;\n}\n\n/* Colores para tema oscuro - blanco sutil */\n:host-context(.dark) .so-root,\n:host-context([data-theme="dark"]) .so-root,\nhtml.dark .so-root,\n[data-theme="dark"] .so-root {\n  --so-thumb-color-start: rgba(255, 255, 255, 0.3);\n  --so-thumb-color-end: rgba(255, 255, 255, 0.3);\n  --so-thumb-color-hover: rgba(255, 255, 255, 0.45);\n  --so-thumb-color-active: rgba(255, 255, 255, 0.6);\n}\n\n.so-root.so-block {\n  display: block;\n  height: 100%;  /* Enable scroll by giving explicit height */\n}\n\n.so-scroll-area {\n  width: 100%;\n  height: 100%;  /* Enable scroll by giving explicit height */\n  overflow-x: auto;\n  overflow-y: auto;  /* Permitir scroll vertical por defecto para contenido general */\n  -ms-overflow-style: none;\n  scrollbar-width: none;\n}\n\n/* Cuando hay tabla, el tbody maneja el scroll vertical */\n.so-root[data-so-table] .so-scroll-area {\n  overflow-y: hidden;\n}\n\n.so-scroll-area::-webkit-scrollbar {\n  width: 0;\n  height: 0;\n}\n\n.so-root [data-so-vertical] {\n  overscroll-behavior: contain;\n  -ms-overflow-style: none;\n  scrollbar-width: none;\n}\n\n.so-root [data-so-vertical]::-webkit-scrollbar {\n  width: 0;\n  height: 0;\n}\n\n.so-scrollbar {\n  position: absolute;\n  pointer-events: none;\n  opacity: 0;\n  transition: opacity 180ms ease;\n  z-index: 10;\n  display: none;\n}\n\n.so-root.so-scrolling .so-scrollbar,\n.so-root:hover .so-scrollbar {\n  opacity: 1;\n}\n\n.so-root.so-scrolling .so-scrollbar,\n.so-root:hover .so-scrollbar,\n.so-scrollbar:focus-within {\n  pointer-events: auto;\n}\n\n.so-root.so-has-overflow-y .so-scrollbar-y {\n  display: block;\n}\n\n.so-root.so-has-overflow-x .so-scrollbar-x {\n  display: block;\n}\n\n.so-root.so-has-overflow-x::after {\n  content: \'\';\n  position: absolute;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  height: var(--so-track-size);\n  background: linear-gradient(180deg, rgba(255, 255, 255, 0), rgba(255, 255, 255, 0.12));\n  pointer-events: none;\n  opacity: 0;\n  transition: opacity 180ms ease;\n}\n\n.so-root.so-has-overflow-x.so-scrolling::after,\n.so-root.so-has-overflow-x:hover::after {\n  opacity: 1;\n}\n\n.so-scrollbar-y {\n  right: 2px;\n  top: 0;\n  width: var(--so-track-size);\n  height: 0;\n}\n\n/* Scrollbar horizontal con z-index: 2 para estar debajo de la vertical (z-index: 10) */\n.so-scrollbar-x {\n  left: 0;\n  top: 0;\n  height: var(--so-track-size);\n  width: 0;\n  z-index: 2;\n}\n\n/* Las dimensiones de las barras se controlan dinámicamente desde TypeScript cuando ambas están activas */\n\n.so-thumb {\n  position: absolute;\n  border-radius: 999px;\n  -webkit-backdrop-filter: blur(var(--so-thumb-blur));\n          backdrop-filter: blur(var(--so-thumb-blur));\n  will-change: transform, width, height, opacity;\n  pointer-events: auto;\n  cursor: grab;\n  touch-action: none;\n  background: linear-gradient(90deg, var(--so-thumb-color-start), var(--so-thumb-color-end));\n}\n\n.so-thumb:active {\n  cursor: grabbing;\n  background: var(--so-thumb-color-active);\n}\n\n.so-thumb:hover {\n  background: var(--so-thumb-color-hover);\n}\n\n.so-thumb-y {\n  top: 0;\n  right: 0;\n  width: 100%;\n  height: 32px;\n  transform: translateY(0);\n  background: linear-gradient(180deg, var(--so-thumb-color-start), var(--so-thumb-color-end));\n}\n\n.so-thumb-x {\n  left: 0;\n  top: 0;\n  height: 100%;\n  width: 32px;\n  transform: translateX(0);\n}\n\n.so-root[data-so-max-height] [data-so-vertical] {\n  max-height: var(--so-max-height, 100%);\n  height: var(--so-body-height, auto);\n  min-height: var(--so-body-height, auto);\n}\n\n.so-root.so-no-vertical .so-scrollbar-y,\n.so-root.so-no-horizontal .so-scrollbar-x {\n  display: none !important;\n}\n\n.so-root[data-so-table][data-so-sync-columns] table {\n  border-collapse: collapse;\n  width: max-content;\n  min-width: 100%;\n  display: block;\n}\n\n.so-root[data-so-table][data-so-sync-columns] thead,\n.so-root[data-so-table][data-so-sync-columns] tbody {\n  display: block;\n  width: 100%;\n}\n\n.so-root[data-so-table][data-so-sync-columns] thead {\n  overflow: hidden;\n}\n\n.so-root[data-so-table][data-so-sync-columns] thead tr,\n.so-root[data-so-table][data-so-sync-columns] tbody tr {\n  display: grid;\n  grid-template-columns: var(\n    --so-column-template,\n    repeat(auto-fit, minmax(var(--so-min-column-width, 140px), max-content))\n  );\n  width: max-content;\n  min-width: 100%;\n}\n\n.so-root[data-so-table][data-so-sync-columns] tbody[data-so-vertical] {\n  display: block;\n  overflow-y: auto;\n  overflow-x: hidden;\n  position: relative;\n}\n\n.so-root[data-so-table][data-so-sync-columns] th,\n.so-root[data-so-table][data-so-sync-columns] td {\n  min-width: var(--so-min-column-width, 140px);\n  box-sizing: border-box;\n  white-space: nowrap;\n}\n\n.so-root[data-so-table]:not([data-so-sync-columns]) table {\n  width: max-content;\n  min-width: 100%;\n}\n\n.so-root[data-so-table]:not([data-so-sync-columns]) tbody[data-so-vertical] {\n  display: block;\n  overflow-y: auto;\n  overflow-x: hidden;\n  max-height: var(--so-max-height, 100%);\n  height: var(--so-body-height, auto);\n  min-height: var(--so-body-height, auto);\n}\n',""]),module.exports=___CSS_LOADER_EXPORT___.toString()},"./src/stories/ui-scroll-overlay.stories.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Default:()=>Default,NoScroll:()=>NoScroll,SmallHeight:()=>SmallHeight,WithColumnTemplate:()=>WithColumnTemplate,__namedExportsOrder:()=>__namedExportsOrder,default:()=>ui_scroll_overlay_stories});var tslib_es6=__webpack_require__("./node_modules/tslib/tslib.es6.mjs");var scroll_overlay_componentngResource=__webpack_require__("./src/app/shared/ui/organisms/scroll-overlay/scroll-overlay.component.css?ngResource"),scroll_overlay_componentngResource_default=__webpack_require__.n(scroll_overlay_componentngResource),debug_node=__webpack_require__("./node_modules/@angular/core/fesm2022/debug_node.mjs"),core=__webpack_require__("./node_modules/@angular/core/fesm2022/core.mjs");let ScrollOverlayComponent=class ScrollOverlayComponent{elementRef;verticalSelector="[data-scroll-overlay-vertical], tbody";horizontalSelector="[data-scroll-overlay-horizontal]";minThumbSize=28;trackSize=7;autoHideDelay=800;_lockColumnTemplate=!1;_columnTemplate=null;set lockColumnTemplate(value){const coerced=!!value;this._lockColumnTemplate=coerced,this.hostEl&&(this.hostEl.classList.toggle("so-lock-template",coerced),coerced&&this._columnTemplate?this.applyColumnTemplate():coerced||this._columnTemplate||this.hostEl.style.removeProperty("--so-column-template"),this.syncGeometry())}get lockColumnTemplate(){return this._lockColumnTemplate}set columnTemplate(value){const normalized="string"==typeof value?value.trim():"",template=normalized||null;this._columnTemplate!==template&&(this._columnTemplate=template,this.hostEl&&(this.applyColumnTemplate(),this.syncGeometry()))}get columnTemplate(){return this._columnTemplate}syncTableColumns=!0;skipTableDetection=!1;set minColumnWidth(value){const parsed=Number(value);this._minColumnWidth=Number.isFinite(parsed)&&parsed>0?parsed:140,this.applyMinColumnWidth(),this.hostEl&&this.syncGeometry()}get minColumnWidth(){return this._minColumnWidth}set maxBodyHeight(value){const parsed="string"==typeof value?value.trim():value;this._maxBodyHeight=""===parsed||null==parsed?void 0:parsed,this.applyMaxHeight(),this.hostEl&&this.syncGeometry()}get maxBodyHeight(){return this._maxBodyHeight}set disableVertical(value){this._disableVertical=value,this.hostEl&&(this.hostEl.classList.toggle("so-no-vertical",!!value),value&&this.hostEl.classList.remove("so-has-overflow-y"),this.updateThumbs(),this.updateScrollAreaOverflow())}get disableVertical(){return this._disableVertical}set disableHorizontal(value){this._disableHorizontal=value,this.hostEl&&(this.hostEl.classList.toggle("so-no-horizontal",!!value),value&&this.hostEl.classList.remove("so-has-overflow-x"),this.updateThumbs())}get disableHorizontal(){return this._disableHorizontal}scrollAreaRef;barYRef;barXRef;thumbYRef;thumbXRef;listeners=[];isBrowser="undefined"!=typeof window&&"undefined"!=typeof document;horizontalBarGap=3;verticalBarGap=10;hostEl;verticalScroller;horizontalScroller;tableHead;headerRow;hideTimer;verticalThumbSize=this.minThumbSize;horizontalThumbSize=this.minThumbSize;resizeObserver;mutationObserver;draggingY=!1;draggingX=!1;dragStartClientY=0;dragStartClientX=0;dragStartScrollTop=0;dragStartScrollLeft=0;dragPointerIdY;dragPointerIdX;_maxBodyHeight;_minColumnWidth=140;_disableVertical=!1;_disableHorizontal=!1;constructor(elementRef){this.elementRef=elementRef}ngAfterViewInit(){this.isBrowser&&(this.hostEl=this.elementRef.nativeElement,this.hostEl.style.setProperty("--so-track-size",`${this.trackSize}px`),this.hostEl.classList.toggle("so-lock-template",this._lockColumnTemplate),this.applyMinColumnWidth(),this.applyColumnTemplate(),this.resolveScrollElements(!0),this.applyMaxHeight(),this.horizontalScroller||(this.horizontalScroller=this.scrollAreaRef.nativeElement),this.disableVertical&&this.hostEl.classList.add("so-no-vertical"),this.disableHorizontal&&this.hostEl.classList.add("so-no-horizontal"),this.attachListeners(),this.syncGeometry(),this.showBar())}ngOnDestroy(){this.clearHideTimer(),this.listeners.forEach(unsubscribe=>unsubscribe()),this.listeners.length=0,this.resizeObserver&&this.resizeObserver.disconnect(),this.mutationObserver&&this.mutationObserver.disconnect(),this.verticalScroller?.hasAttribute("data-so-vertical-temp")&&(this.verticalScroller.removeAttribute("data-so-vertical"),this.verticalScroller.removeAttribute("data-so-vertical-temp")),this.horizontalScroller?.hasAttribute("data-so-horizontal-temp")&&(this.horizontalScroller.removeAttribute("data-so-horizontal"),this.horizontalScroller.removeAttribute("data-so-horizontal-temp"))}applyMinColumnWidth(){this.hostEl&&this.hostEl.style.setProperty("--so-min-column-width",`${this._minColumnWidth}px`)}applyColumnTemplate(){this.hostEl&&(this._columnTemplate?this.hostEl.style.setProperty("--so-column-template",this._columnTemplate):this._lockColumnTemplate||this.hostEl.style.removeProperty("--so-column-template"))}applyMaxHeight(){if(!this.hostEl)return;const value=this.normalizeCssSize(this._maxBodyHeight);if(!value)return this.hostEl.removeAttribute("data-so-max-height"),this.hostEl.style.removeProperty("--so-max-height"),this.hostEl.style.removeProperty("--so-body-height"),void this.updateVerticalMaxHeight(null);this.hostEl.setAttribute("data-so-max-height","true"),this.hostEl.style.setProperty("--so-max-height",value),this.hostEl.style.setProperty("--so-body-height",value),this.updateVerticalMaxHeight(value)}resolveScrollElements(isInitial=!1){const host=this.elementRef.nativeElement;host.querySelectorAll("[data-so-horizontal-temp]").forEach(el=>{el.removeAttribute("data-so-horizontal"),el.removeAttribute("data-so-horizontal-temp")}),host.querySelectorAll("[data-so-vertical-temp]").forEach(el=>{el.removeAttribute("data-so-vertical"),el.removeAttribute("data-so-vertical-temp");const element=el;element.style.removeProperty("--so-body-height"),element.style.removeProperty("max-height"),element.style.removeProperty("height"),element.style.removeProperty("min-height"),element.style.removeProperty("display"),element.style.removeProperty("overflow-y"),element.style.removeProperty("overflow-x"),element.style.removeProperty("box-sizing")});const isInsideNestedScrollOverlay=el=>{let parent=el.parentElement;for(;parent&&parent!==host;){if(parent.classList.contains("so-root"))return!0;parent=parent.parentElement}return!1},searchDirect=selector=>{if(!selector)return null;const parts=selector.split(",").map(part=>part.trim()).filter(Boolean);for(const part of parts){const directMatch=Array.from(host.querySelectorAll(part)).find(el=>!isInsideNestedScrollOverlay(el));if(directMatch)return directMatch}return null},scrollArea=this.scrollAreaRef.nativeElement;scrollArea.setAttribute("data-so-horizontal","true");const resolvedHorizontal=searchDirect(this.horizontalSelector);this.horizontalScroller=resolvedHorizontal??scrollArea,this.horizontalScroller!==scrollArea?(this.horizontalScroller.setAttribute("data-so-horizontal","true"),this.horizontalScroller.setAttribute("data-so-horizontal-temp","true")):this.horizontalScroller.removeAttribute("data-so-horizontal-temp");let vertical=searchDirect(this.verticalSelector)??void 0;if(!vertical)if(this.skipTableDetection)vertical=scrollArea;else{vertical=Array.from(host.querySelectorAll("tbody")).find(tbody=>!isInsideNestedScrollOverlay(tbody))??scrollArea}if(this.verticalScroller=vertical??void 0,this.verticalScroller&&(this.verticalScroller.hasAttribute("data-so-vertical")?this.verticalScroller.removeAttribute("data-so-vertical-temp"):(this.verticalScroller.setAttribute("data-so-vertical","true"),this.verticalScroller.setAttribute("data-so-vertical-temp","true")),this.applyVerticalScrollerDefaults()),this.skipTableDetection)this.tableHead=null,this.headerRow=null;else{const directTable=Array.from(host.querySelectorAll("table")).find(t=>!isInsideNestedScrollOverlay(t));this.tableHead=directTable?.querySelector("thead"),this.headerRow=this.tableHead?.querySelector("tr")}this.tableHead&&"TBODY"===this.verticalScroller?.tagName?(host.setAttribute("data-so-table","true"),this.syncTableColumns?host.setAttribute("data-so-sync-columns","true"):host.removeAttribute("data-so-sync-columns")):(host.removeAttribute("data-so-table"),host.removeAttribute("data-so-sync-columns")),this.updateScrollAreaOverflow();const value=this.normalizeCssSize(this._maxBodyHeight);this.updateVerticalMaxHeight(value),this.ensureSingleScrollbar()}attachListeners(){const host=this.hostEl,thumbY=(this.barYRef.nativeElement,this.barXRef.nativeElement,this.thumbYRef.nativeElement),thumbX=this.thumbXRef.nativeElement,addListener=(target,type,listener,options)=>{target.addEventListener(type,listener,options),this.listeners.push(()=>target.removeEventListener(type,listener,options))},vertical=this.verticalScroller,horizontal=this.horizontalScroller,handleScroll=()=>{this.updateThumbs(),this.showBar()},handlePointer=()=>{this.updateThumbs(),this.showBar()};addListener(host,"mouseenter",handlePointer),addListener(host,"mouseleave",()=>this.hideBar()),!this.disableVertical&&vertical&&(addListener(vertical,"scroll",handleScroll,{passive:!0}),addListener(vertical,"wheel",handlePointer,{passive:!0}),addListener(vertical,"mouseenter",handlePointer),addListener(vertical,"mouseleave",()=>this.hideBar()),addListener(vertical,"touchstart",handlePointer,{passive:!0}),addListener(vertical,"touchmove",handlePointer,{passive:!0})),!this.disableHorizontal&&horizontal&&(addListener(horizontal,"scroll",handleScroll,{passive:!0}),addListener(horizontal,"wheel",handlePointer,{passive:!0}),addListener(horizontal,"mouseenter",handlePointer),addListener(horizontal,"mouseleave",()=>this.hideBar()),addListener(horizontal,"touchstart",handlePointer,{passive:!0}),addListener(horizontal,"touchmove",handlePointer,{passive:!0})),this.disableVertical||(addListener(thumbY,"pointerdown",event=>this.startDragY(event)),addListener(thumbY,"pointermove",event=>this.moveDragY(event)),addListener(thumbY,"pointerup",event=>this.endDragY(event)),addListener(thumbY,"pointercancel",event=>this.endDragY(event))),this.disableHorizontal||(addListener(thumbX,"pointerdown",event=>this.startDragX(event)),addListener(thumbX,"pointermove",event=>this.moveDragX(event)),addListener(thumbX,"pointerup",event=>this.endDragX(event)),addListener(thumbX,"pointercancel",event=>this.endDragX(event)));const supportsResize="undefined"!=typeof ResizeObserver,supportsMutation="undefined"!=typeof MutationObserver;if(supportsResize){this.resizeObserver=new ResizeObserver(()=>{requestAnimationFrame(()=>{this.syncGeometry()})}),this.resizeObserver.observe(this.hostEl),vertical&&this.resizeObserver.observe(vertical),horizontal&&horizontal!==vertical&&this.resizeObserver.observe(horizontal);const table=this.tableHead?.closest("table");table&&this.resizeObserver.observe(table),this.headerRow&&this.resizeObserver.observe(this.headerRow)}supportsMutation&&this.verticalScroller&&(this.mutationObserver=new MutationObserver(()=>this.syncGeometry()),this.mutationObserver.observe(this.verticalScroller,{childList:!0,subtree:!0}))}showBar(){this.disableVertical&&this.disableHorizontal||(this.hostEl.classList.add("so-scrolling"),this.clearHideTimer(),this.hideTimer=setTimeout(()=>{this.hostEl.classList.remove("so-scrolling"),this.hideTimer=void 0},this.autoHideDelay))}hideBar(){this.hostEl.classList.remove("so-scrolling"),this.clearHideTimer()}clearHideTimer(){this.hideTimer&&(clearTimeout(this.hideTimer),this.hideTimer=void 0)}updateVerticalThumb(){const vertical=this.verticalScroller,bar=this.barYRef.nativeElement,thumb=this.thumbYRef.nativeElement;if(!vertical||this.disableVertical)return this.hostEl.classList.remove("so-has-overflow-y"),bar.style.opacity="0",void(bar.style.pointerEvents="none");const{scrollTop,scrollHeight,clientHeight}=vertical;if(!(scrollHeight>clientHeight+1))return this.hostEl.classList.remove("so-has-overflow-y"),this.verticalThumbSize=clientHeight,thumb.style.height=`${clientHeight}px`,thumb.style.transform="translateY(0)",bar.style.opacity="0",void(bar.style.pointerEvents="none");this.hostEl.classList.add("so-has-overflow-y"),bar.style.opacity="",bar.style.pointerEvents="auto";const thumbHeight=Math.max(this.minThumbSize,clientHeight*clientHeight/scrollHeight);this.verticalThumbSize=thumbHeight,thumb.style.height=`${thumbHeight}px`;const maxThumbOffset=Math.max(1,clientHeight-thumbHeight),offset=scrollTop/Math.max(1,scrollHeight-clientHeight)*maxThumbOffset;thumb.style.transform=`translateY(${offset}px)`}updateHorizontalThumb(){const horizontal=this.horizontalScroller,bar=this.barXRef.nativeElement,thumb=this.thumbXRef.nativeElement;if(!horizontal||this.disableHorizontal)return this.hostEl.classList.remove("so-has-overflow-x"),bar.style.opacity="0",void(bar.style.pointerEvents="none");const{scrollLeft,scrollWidth,clientWidth}=horizontal;if(!(scrollWidth>clientWidth+1))return this.hostEl.classList.remove("so-has-overflow-x"),this.horizontalThumbSize=clientWidth,thumb.style.width=`${clientWidth}px`,thumb.style.transform="translateX(0)",bar.style.opacity="0",void(bar.style.pointerEvents="none");this.hostEl.classList.add("so-has-overflow-x"),bar.style.opacity="",bar.style.pointerEvents="auto";const thumbWidth=Math.max(this.minThumbSize,clientWidth*clientWidth/scrollWidth);this.horizontalThumbSize=thumbWidth,thumb.style.width=`${thumbWidth}px`;let effectiveBarWidth=clientWidth;this.hasVerticalScrollOverflow()&&!this.disableVertical&&(effectiveBarWidth=Math.max(0,clientWidth-this.trackSize-this.horizontalBarGap));const maxThumbOffset=Math.max(1,effectiveBarWidth-thumbWidth),offset=scrollLeft/Math.max(1,scrollWidth-clientWidth)*maxThumbOffset;thumb.style.transform=`translateX(${offset}px)`}updateThumbs(){this.updateVerticalThumb(),this.updateHorizontalThumb()}syncGeometry(){this.syncColumnTemplate(),this.updateScrollAreaDimensions();const hostRect=this.getSafeRect(this.hostEl),hasVerticalOverflow=this.hasVerticalScrollOverflow(),hasHorizontalOverflow=this.hasHorizontalScrollOverflow();let horizontalRect=null,horizontalBarTop=null;if(this.horizontalScroller&&!this.disableHorizontal&&(horizontalRect=this.getSafeRect(this.horizontalScroller),horizontalBarTop=horizontalRect.top-hostRect.top+horizontalRect.height-this.trackSize),this.verticalScroller&&!this.disableVertical){const verticalRect=this.getSafeRect(this.verticalScroller),barY=this.barYRef.nativeElement,barTop=verticalRect.top-hostRect.top;barY.style.top=`${barTop}px`;let barHeight=verticalRect.height;hasHorizontalOverflow&&null!==horizontalBarTop&&(barHeight=Math.max(0,horizontalBarTop-barTop-this.verticalBarGap)),barY.style.height=`${barHeight}px`}if(horizontalRect&&!this.disableHorizontal){const barX=this.barXRef.nativeElement,leftPosition=horizontalRect.left-hostRect.left;barX.style.left=`${leftPosition}px`;const horizontalBarVisualTop=horizontalBarTop??horizontalRect.top-hostRect.top+horizontalRect.height-this.trackSize;barX.style.top=`${horizontalBarVisualTop}px`;let barWidth=hostRect.width-leftPosition;if(hasVerticalOverflow&&!this.disableVertical){const horizontalInset=this.trackSize+this.horizontalBarGap;barWidth=Math.max(0,barWidth-horizontalInset)}barX.style.width=`${barWidth}px`}this.updateThumbs()}hasVerticalScrollOverflow(){if(!this.verticalScroller||this.disableVertical)return!1;const{scrollHeight,clientHeight}=this.verticalScroller;return scrollHeight>clientHeight+1}hasHorizontalScrollOverflow(){if(!this.horizontalScroller||this.disableHorizontal)return!1;const{scrollWidth,clientWidth}=this.horizontalScroller;return scrollWidth>clientWidth+1}updateVerticalMaxHeight(value){if(this.verticalScroller){if(!value)return this.verticalScroller.style.removeProperty("--so-body-height"),this.verticalScroller.style.removeProperty("max-height"),this.verticalScroller.style.removeProperty("height"),void this.verticalScroller.style.removeProperty("min-height");this.verticalScroller.style.setProperty("--so-body-height",value),this.verticalScroller.style.maxHeight=value,this.verticalScroller.style.height=value,this.verticalScroller.style.minHeight=value}}updateScrollAreaOverflow(){const scrollArea=this.scrollAreaRef?.nativeElement;if(!scrollArea)return;const shouldAllowVerticalScroll=this.disableVertical||!this.verticalScroller||this.verticalScroller===scrollArea;scrollArea.style.overflowY=shouldAllowVerticalScroll?"auto":"hidden"}applyVerticalScrollerDefaults(){if(!this.verticalScroller)return;if(this.verticalScroller===this.scrollAreaRef.nativeElement)return void(this.verticalScroller.style.overflowY="auto");const nodeName=this.verticalScroller.nodeName,style=this.verticalScroller.style;"TBODY"===nodeName&&(style.display="block",style.overflowY="auto",style.overflowX="hidden",style.boxSizing="border-box")}normalizeCssSize(value){if(void 0===value)return null;if("number"==typeof value&&Number.isFinite(value))return`${value}px`;const stringValue=String(value).trim();if(!stringValue)return null;return/^-?\d+(?:\.\d+)?$/.test(stringValue)?`${stringValue}px`:stringValue}updateScrollAreaDimensions(){const scrollArea=this.scrollAreaRef?.nativeElement;if(scrollArea){if(this.horizontalScroller===scrollArea){this.getSafeRect(this.hostEl).width>0&&(scrollArea.style.maxWidth="100%",scrollArea.style.width="100%")}this.hostEl.hasAttribute("data-so-table")&&this.updateTableDimensions()}}updateTableDimensions(){const table=this.hostEl.querySelector("table");if(!table)return;table.style.width="max-content",table.style.minWidth="100%";const thead=table.querySelector("thead"),tbody=table.querySelector("tbody");thead&&tbody&&(thead.style.width="100%",tbody.style.width="100%",requestAnimationFrame(()=>{this.syncColumnTemplate()}))}ensureSingleScrollbar(){if(!this.verticalScroller||this.disableVertical)return;const host=this.hostEl;Array.from(host.querySelectorAll("[data-so-vertical]")).filter(el=>el!==this.verticalScroller).forEach(el=>{el.hasAttribute("data-so-vertical-temp")&&(el.removeAttribute("data-so-vertical"),el.removeAttribute("data-so-vertical-temp")),el.style.removeProperty("--so-body-height"),el.style.removeProperty("max-height"),el.style.removeProperty("height"),el.style.removeProperty("min-height"),el.style.removeProperty("overflow-y"),el.style.removeProperty("overflow-x"),el.style.removeProperty("box-sizing")})}syncColumnTemplate(){if(!this.syncTableColumns||this._lockColumnTemplate||!this.headerRow||!this.verticalScroller||"TBODY"!==this.verticalScroller.tagName)return void(this._lockColumnTemplate||this.hostEl.style.removeProperty("--so-column-template"));const bodyRows=Array.from(this.verticalScroller.querySelectorAll(":scope > tr")),headerCells=Array.from(this.headerRow.children),columnCount=Math.max(headerCells.length,...bodyRows.map(row=>row.children.length));if(!columnCount)return void this.hostEl.style.removeProperty("--so-column-template");const containerWidth=this.getSafeRect(this.hostEl).width,availableWidth=Math.max(containerWidth,300),baseColumnWidth=Math.max(this._minColumnWidth,Math.floor((availableWidth-20)/columnCount)),widths=Array.from({length:columnCount},()=>baseColumnWidth),updateWidth=(cell,index)=>{const rect=this.getSafeRect(cell),contentWidth=Math.ceil(rect.width),calculatedWidth=Math.max(this._minColumnWidth,Math.min(contentWidth,Math.floor(availableWidth/2)));calculatedWidth>widths[index]&&(widths[index]=calculatedWidth)};headerCells.forEach((cell,index)=>updateWidth(cell,index)),bodyRows.forEach(row=>{Array.from(row.children).forEach((cell,index)=>updateWidth(cell,index))});const totalWidth=widths.reduce((sum,width)=>sum+width,0);if(totalWidth>1.5*availableWidth){const scale=1.3*availableWidth/totalWidth;widths.forEach((width,index)=>{widths[index]=Math.max(this._minColumnWidth,Math.floor(width*scale))})}const template=widths.map(width=>`${width}px`).join(" ");this.hostEl.style.setProperty("--so-column-template",template)}getSafeRect(element){if(element&&"function"==typeof element.getBoundingClientRect)return element.getBoundingClientRect();const fallback=element,width=fallback?.offsetWidth??0,height=fallback?.offsetHeight??0;return{top:0,left:0,bottom:height,right:width,width,height,x:0,y:0,toJSON:()=>""}}startDragY(event){1!==event.button&&2!==event.button&&this.verticalScroller&&!this.disableVertical&&(this.draggingY=!0,this.dragPointerIdY=event.pointerId,this.dragStartClientY=event.clientY,this.dragStartScrollTop=this.verticalScroller.scrollTop,this.thumbYRef.nativeElement.setPointerCapture(event.pointerId),this.showBar(),event.preventDefault())}moveDragY(event){if(!this.draggingY||!this.verticalScroller||this.disableVertical)return;const maxScrollTop=Math.max(1,this.verticalScroller.scrollHeight-this.verticalScroller.clientHeight),maxThumbOffset=Math.max(1,this.verticalScroller.clientHeight-this.verticalThumbSize),scrollDelta=(event.clientY-this.dragStartClientY)*maxScrollTop/maxThumbOffset;this.verticalScroller.scrollTop=this.dragStartScrollTop+scrollDelta,this.showBar(),event.preventDefault()}endDragY(event){this.draggingY&&(this.draggingY=!1,void 0!==this.dragPointerIdY&&this.thumbYRef.nativeElement.hasPointerCapture?.(this.dragPointerIdY)&&this.thumbYRef.nativeElement.releasePointerCapture(this.dragPointerIdY),this.dragPointerIdY=void 0,this.showBar())}startDragX(event){1!==event.button&&2!==event.button&&this.horizontalScroller&&!this.disableHorizontal&&(this.draggingX=!0,this.dragPointerIdX=event.pointerId,this.dragStartClientX=event.clientX,this.dragStartScrollLeft=this.horizontalScroller.scrollLeft,this.thumbXRef.nativeElement.setPointerCapture(event.pointerId),this.showBar(),event.preventDefault())}moveDragX(event){if(!this.draggingX||!this.horizontalScroller||this.disableHorizontal)return;const maxScrollLeft=Math.max(1,this.horizontalScroller.scrollWidth-this.horizontalScroller.clientWidth),maxThumbOffset=Math.max(1,this.horizontalScroller.clientWidth-this.horizontalThumbSize),scrollDelta=(event.clientX-this.dragStartClientX)*maxScrollLeft/maxThumbOffset;this.horizontalScroller.scrollLeft=this.dragStartScrollLeft+scrollDelta,this.showBar(),event.preventDefault()}endDragX(event){this.draggingX&&(this.draggingX=!1,void 0!==this.dragPointerIdX&&this.thumbXRef.nativeElement.hasPointerCapture?.(this.dragPointerIdX)&&this.thumbXRef.nativeElement.releasePointerCapture(this.dragPointerIdX),this.dragPointerIdX=void 0,this.showBar())}static ctorParameters=()=>[{type:debug_node.aKT}];static propDecorators={verticalSelector:[{type:debug_node.pde}],horizontalSelector:[{type:debug_node.pde}],minThumbSize:[{type:debug_node.pde}],trackSize:[{type:debug_node.pde}],autoHideDelay:[{type:debug_node.pde}],lockColumnTemplate:[{type:debug_node.pde}],columnTemplate:[{type:debug_node.pde}],syncTableColumns:[{type:debug_node.pde}],skipTableDetection:[{type:debug_node.pde}],minColumnWidth:[{type:debug_node.pde}],maxBodyHeight:[{type:debug_node.pde}],disableVertical:[{type:debug_node.pde}],disableHorizontal:[{type:debug_node.pde}],scrollAreaRef:[{type:core.ViewChild,args:["scrollArea",{static:!0}]}],barYRef:[{type:core.ViewChild,args:["barY",{static:!0}]}],barXRef:[{type:core.ViewChild,args:["barX",{static:!0}]}],thumbYRef:[{type:core.ViewChild,args:["thumbY",{static:!0}]}],thumbXRef:[{type:core.ViewChild,args:["thumbX",{static:!0}]}]}};ScrollOverlayComponent=(0,tslib_es6.Cg)([(0,debug_node.uAl)({selector:"app-scroll-overlay",standalone:!0,template:'<div class="so-scroll-area" #scrollArea>\r\n  <ng-content></ng-content>\r\n</div>\r\n<div class="so-scrollbar so-scrollbar-y" #barY aria-hidden="true">\r\n  <div class="so-thumb so-thumb-y" #thumbY></div>\r\n</div>\r\n<div class="so-scrollbar so-scrollbar-x" #barX aria-hidden="true">\r\n  <div class="so-thumb so-thumb-x" #thumbX></div>\r\n</div>\r\n',encapsulation:debug_node.gXe.None,host:{class:"so-root"},styles:[scroll_overlay_componentngResource_default()]})],ScrollOverlayComponent);const ui_scroll_overlay_stories={title:"3. Organisms/ScrollOverlay",component:ScrollOverlayComponent,tags:["autodocs"],parameters:{docs:{description:{component:"Contenedor con scroll personalizado y overlays para indicar más contenido."}}}},Default={args:{maxBodyHeight:300},render:args=>({props:args,template:'\n      <app-scroll-overlay [maxBodyHeight]="maxBodyHeight">\n        <table style="width: 100%; border-collapse: collapse;">\n          <thead>\n            <tr style="background: var(--surface-section);">\n              <th style="padding: 0.75rem; text-align: left; border-bottom: 2px solid var(--primary-color);">ID</th>\n              <th style="padding: 0.75rem; text-align: left; border-bottom: 2px solid var(--primary-color);">Nombre</th>\n              <th style="padding: 0.75rem; text-align: left; border-bottom: 2px solid var(--primary-color);">Email</th>\n              <th style="padding: 0.75rem; text-align: left; border-bottom: 2px solid var(--primary-color);">Estado</th>\n            </tr>\n          </thead>\n          <tbody>\n            <tr *ngFor="let i of [1,2,3,4,5,6,7,8,9,10]">\n              <td style="padding: 0.75rem; border-bottom: 1px solid var(--border-color);">{{i}}</td>\n              <td style="padding: 0.75rem; border-bottom: 1px solid var(--border-color);">Usuario {{i}}</td>\n              <td style="padding: 0.75rem; border-bottom: 1px solid var(--border-color);">usuario{{i}}@ejemplo.com</td>\n              <td style="padding: 0.75rem; border-bottom: 1px solid var(--border-color);">Activo</td>\n            </tr>\n          </tbody>\n        </table>\n      </app-scroll-overlay>\n    '})},WithColumnTemplate={args:{maxBodyHeight:300,lockColumnTemplate:!0,columnTemplate:"70px minmax(150px, 1fr) minmax(200px, 2fr) 100px"},render:args=>({props:args,template:'\n      <app-scroll-overlay \n        [maxBodyHeight]="maxBodyHeight"\n        [lockColumnTemplate]="lockColumnTemplate"\n        [columnTemplate]="columnTemplate">\n        <table class="rtc-table">\n          <thead class="rtc-header">\n            <tr>\n              <th>ID</th>\n              <th>Nombre</th>\n              <th>Email</th>\n              <th>Estado</th>\n            </tr>\n          </thead>\n          <tbody class="rtc-body">\n            <tr class="rtc-row" *ngFor="let i of [1,2,3,4,5,6,7,8]">\n              <td>{{i}}</td>\n              <td>Usuario {{i}}</td>\n              <td>usuario{{i}}@ejemplo.com</td>\n              <td>Activo</td>\n            </tr>\n          </tbody>\n        </table>\n      </app-scroll-overlay>\n    '})},SmallHeight={args:{maxBodyHeight:150},render:args=>({props:args,template:'\n      <app-scroll-overlay [maxBodyHeight]="maxBodyHeight">\n        <div style="padding: 1rem;">\n          <p *ngFor="let i of [1,2,3,4,5,6,7,8,9,10]" style="margin-bottom: 1rem;">\n            Párrafo {{i}}: Lorem ipsum dolor sit amet, consectetur adipiscing elit.\n          </p>\n        </div>\n      </app-scroll-overlay>\n    '})},NoScroll={args:{maxBodyHeight:500},render:args=>({props:args,template:'\n      <app-scroll-overlay [maxBodyHeight]="maxBodyHeight">\n        <div style="padding: 1rem;">\n          <p>Este contenido no necesita scroll.</p>\n          <p>Es más pequeño que el contenedor.</p>\n        </div>\n      </app-scroll-overlay>\n    '})},__namedExportsOrder=["Default","WithColumnTemplate","SmallHeight","NoScroll"];Default.parameters={...Default.parameters,docs:{...Default.parameters?.docs,source:{originalSource:'{\n  args: {\n    maxBodyHeight: 300\n  },\n  render: args => ({\n    props: args,\n    template: `\n      <app-scroll-overlay [maxBodyHeight]="maxBodyHeight">\n        <table style="width: 100%; border-collapse: collapse;">\n          <thead>\n            <tr style="background: var(--surface-section);">\n              <th style="padding: 0.75rem; text-align: left; border-bottom: 2px solid var(--primary-color);">ID</th>\n              <th style="padding: 0.75rem; text-align: left; border-bottom: 2px solid var(--primary-color);">Nombre</th>\n              <th style="padding: 0.75rem; text-align: left; border-bottom: 2px solid var(--primary-color);">Email</th>\n              <th style="padding: 0.75rem; text-align: left; border-bottom: 2px solid var(--primary-color);">Estado</th>\n            </tr>\n          </thead>\n          <tbody>\n            <tr *ngFor="let i of [1,2,3,4,5,6,7,8,9,10]">\n              <td style="padding: 0.75rem; border-bottom: 1px solid var(--border-color);">{{i}}</td>\n              <td style="padding: 0.75rem; border-bottom: 1px solid var(--border-color);">Usuario {{i}}</td>\n              <td style="padding: 0.75rem; border-bottom: 1px solid var(--border-color);">usuario{{i}}@ejemplo.com</td>\n              <td style="padding: 0.75rem; border-bottom: 1px solid var(--border-color);">Activo</td>\n            </tr>\n          </tbody>\n        </table>\n      </app-scroll-overlay>\n    `\n  })\n}',...Default.parameters?.docs?.source}}},WithColumnTemplate.parameters={...WithColumnTemplate.parameters,docs:{...WithColumnTemplate.parameters?.docs,source:{originalSource:'{\n  args: {\n    maxBodyHeight: 300,\n    lockColumnTemplate: true,\n    columnTemplate: \'70px minmax(150px, 1fr) minmax(200px, 2fr) 100px\'\n  },\n  render: args => ({\n    props: args,\n    template: `\n      <app-scroll-overlay \n        [maxBodyHeight]="maxBodyHeight"\n        [lockColumnTemplate]="lockColumnTemplate"\n        [columnTemplate]="columnTemplate">\n        <table class="rtc-table">\n          <thead class="rtc-header">\n            <tr>\n              <th>ID</th>\n              <th>Nombre</th>\n              <th>Email</th>\n              <th>Estado</th>\n            </tr>\n          </thead>\n          <tbody class="rtc-body">\n            <tr class="rtc-row" *ngFor="let i of [1,2,3,4,5,6,7,8]">\n              <td>{{i}}</td>\n              <td>Usuario {{i}}</td>\n              <td>usuario{{i}}@ejemplo.com</td>\n              <td>Activo</td>\n            </tr>\n          </tbody>\n        </table>\n      </app-scroll-overlay>\n    `\n  })\n}',...WithColumnTemplate.parameters?.docs?.source}}},SmallHeight.parameters={...SmallHeight.parameters,docs:{...SmallHeight.parameters?.docs,source:{originalSource:'{\n  args: {\n    maxBodyHeight: 150\n  },\n  render: args => ({\n    props: args,\n    template: `\n      <app-scroll-overlay [maxBodyHeight]="maxBodyHeight">\n        <div style="padding: 1rem;">\n          <p *ngFor="let i of [1,2,3,4,5,6,7,8,9,10]" style="margin-bottom: 1rem;">\n            Párrafo {{i}}: Lorem ipsum dolor sit amet, consectetur adipiscing elit.\n          </p>\n        </div>\n      </app-scroll-overlay>\n    `\n  })\n}',...SmallHeight.parameters?.docs?.source}}},NoScroll.parameters={...NoScroll.parameters,docs:{...NoScroll.parameters?.docs,source:{originalSource:'{\n  args: {\n    maxBodyHeight: 500\n  },\n  render: args => ({\n    props: args,\n    template: `\n      <app-scroll-overlay [maxBodyHeight]="maxBodyHeight">\n        <div style="padding: 1rem;">\n          <p>Este contenido no necesita scroll.</p>\n          <p>Es más pequeño que el contenedor.</p>\n        </div>\n      </app-scroll-overlay>\n    `\n  })\n}',...NoScroll.parameters?.docs?.source}}}}}]);