(self.webpackChunkatomic_ui=self.webpackChunkatomic_ui||[]).push([[172],{"./src/app/shared/ui/molecules/datepicker/datepicker.component.css?ngResource":(module,__unused_webpack_exports,__webpack_require__)=>{var ___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___=__webpack_require__("./node_modules/css-loader/dist/runtime/noSourceMaps.js"),___CSS_LOADER_EXPORT___=__webpack_require__("./node_modules/css-loader/dist/runtime/api.js")(___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___);___CSS_LOADER_EXPORT___.push([module.id,':host {\n  display: block;\n  position: relative;\n  width: 100%;\n}\n\n/* === TRIGGER AREA === */\n.datepicker-trigger {\n  position: relative;\n  cursor: pointer;\n}\n\n/* Icon overrides for the input trigger */\n.calendar-icon-btn {\n  position: absolute;\n  right: 0.5rem;\n  top: 50%;\n  transform: translateY(-50%);\n  border: none;\n  background: transparent;\n  cursor: pointer;\n  color: var(--text-color-secondary);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: 2.25rem;\n  height: 2.25rem;\n  border-radius: 50%;\n  transition: background-color 0.2s;\n  z-index: 20;\n  /* Above input label */\n}\n\n.calendar-icon-btn:hover {\n  background-color: var(--hover-background-subtle);\n  color: var(--primary-color);\n}\n\n/* === DROPDOWN POPUP === */\n.datepicker-popup {\n  position: absolute;\n  top: 100%;\n  left: 0;\n  z-index: 1000;\n  margin-top: 0.5rem;\n  background: var(--surface-elevated, #ffffff);\n  border: 1px solid var(--border-color, #e5e7eb);\n  border-radius: 0.75rem;\n  box-shadow: var(--shadow-lg, 0 10px 15px -3px rgba(0, 0, 0, 0.1));\n  padding: 1rem;\n  width: 320px;\n  /* Fixed width for consistency */\n  box-sizing: border-box;\n  animation: slideDown 0.2s ease-out;\n  transform-origin: top left;\n}\n\n@keyframes slideDown {\n  from {\n    opacity: 0;\n    transform: translateY(-10px);\n  }\n\n  to {\n    opacity: 1;\n    transform: translateY(0);\n  }\n}\n\n/* === HEADER (Month/Year Nav) === */\n.calendar-header {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  margin-bottom: 1rem;\n}\n\n.current-month {\n  font-weight: 600;\n  color: var(--text-color, #1f2937);\n  font-size: 1rem;\n  text-transform: capitalize;\n}\n\n.nav-btn {\n  background: transparent;\n  border: 1px solid var(--border-color);\n  border-radius: 0.5rem;\n  width: 2rem;\n  height: 2rem;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  cursor: pointer;\n  color: var(--text-color-secondary);\n  transition: all 0.2s;\n}\n\n.nav-btn:hover {\n  background-color: var(--hover-background);\n  color: var(--primary-color);\n  border-color: var(--primary-color);\n}\n\n/* === CALENDAR GRID === */\n.calendar-grid {\n  display: grid;\n  grid-template-columns: repeat(7, 1fr);\n  gap: 0.25rem;\n  text-align: center;\n}\n\n.weekday-label {\n  font-size: 0.75rem;\n  font-weight: 600;\n  color: var(--text-color-muted);\n  padding-bottom: 0.5rem;\n  text-transform: uppercase;\n}\n\n.calendar-day {\n  aspect-ratio: 1;\n  /* Square cells */\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  font-size: 0.875rem;\n  cursor: pointer;\n  border-radius: 50%;\n  transition: all 0.2s;\n  color: var(--text-color);\n  -webkit-user-select: none;\n          user-select: none;\n}\n\n.calendar-day:hover:not(.empty):not(.disabled) {\n  background-color: var(--hover-background);\n  color: var(--primary-color);\n}\n\n.calendar-day.empty {\n  cursor: default;\n}\n\n.calendar-day.today {\n  font-weight: 700;\n  color: var(--primary-color);\n  border: 1px solid var(--primary-color);\n}\n\n.calendar-day.selected {\n  background-color: var(--primary-color);\n  color: #ffffff;\n  /* Always white for contrast on primary */\n  font-weight: 600;\n}\n\n.calendar-day.disabled {\n  color: var(--text-color-disabled, #d1d5db);\n  cursor: not-allowed;\n  opacity: 0.5;\n}\n\n/* Dark Mode Overrides (if variables aren\'t sufficient) */\n:host-context(.dark) .datepicker-popup,\n:host-context([data-theme="dark"]) .datepicker-popup {\n  background: var(--surface-elevated, #1f2937);\n  border-color: var(--border-color, #374151);\n}\n\n/* === MONTH / YEAR GRIDS === */\n.month-grid,\n.year-grid {\n  display: grid;\n  grid-template-columns: repeat(3, 1fr);\n  gap: 0.5rem;\n  padding: 0.5rem;\n}\n\n.calendar-option {\n  padding: 0.5rem;\n  border-radius: 0.5rem;\n  background: transparent;\n  border: none;\n  cursor: pointer;\n  font-size: 0.875rem;\n  font-weight: 500;\n  color: var(--text-color);\n  transition: all 0.2s;\n  text-transform: capitalize;\n}\n\n.calendar-option:hover {\n  background-color: var(--hover-background);\n  color: var(--primary-color);\n}\n\n.calendar-option.selected {\n  background-color: var(--primary-color);\n  color: #ffffff;\n  font-weight: 600;\n}\n\n.calendar-option.current {\n  color: var(--primary-color);\n  background-color: var(--hover-background);\n  font-weight: 700;\n  border: 1px solid var(--primary-color);\n}',""]),module.exports=___CSS_LOADER_EXPORT___.toString()},"./src/stories/ui-datepicker.stories.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Default:()=>Default,Disabled:()=>Disabled,InForm:()=>InForm,WithLabel:()=>WithLabel,__namedExportsOrder:()=>__namedExportsOrder,default:()=>ui_datepicker_stories});var dist=__webpack_require__("./node_modules/@storybook/angular/dist/index.js"),fesm2022_forms=__webpack_require__("./node_modules/@angular/forms/fesm2022/forms.mjs"),tslib_es6=__webpack_require__("./node_modules/tslib/tslib.es6.mjs");var datepicker_componentngResource=__webpack_require__("./src/app/shared/ui/molecules/datepicker/datepicker.component.css?ngResource"),datepicker_componentngResource_default=__webpack_require__.n(datepicker_componentngResource),root_effect_scheduler=__webpack_require__("./node_modules/@angular/core/fesm2022/root_effect_scheduler.mjs"),resource=__webpack_require__("./node_modules/@angular/core/fesm2022/resource.mjs"),debug_node=__webpack_require__("./node_modules/@angular/core/fesm2022/debug_node.mjs"),common_module=__webpack_require__("./node_modules/@angular/common/fesm2022/common_module.mjs"),floating_input_component=__webpack_require__("./src/app/shared/ui/atoms/floating-input/floating-input.component.ts");let DatepickerComponent=class DatepickerComponent{elementRef;datePipe;label="";variant="floating";error="";disabled=!1;isOpen=(0,root_effect_scheduler.vPA)(!1);value=(0,root_effect_scheduler.vPA)(null);currentViewDate=(0,root_effect_scheduler.vPA)(new Date);currentView=(0,root_effect_scheduler.vPA)("day");weekDays=["Do","Lu","Ma","Mi","Ju","Vi","Sa"];months=["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"];onChange=()=>{};onTouched=()=>{};constructor(elementRef,datePipe){this.elementRef=elementRef,this.datePipe=datePipe}formattedValue=(0,resource.EW)(()=>{const v=this.value();return v&&this.datePipe.transform(v,"dd/MM/yyyy")||""});daysInMonth=(0,resource.EW)(()=>{const view=this.currentViewDate(),year=view.getFullYear(),month=view.getMonth(),days=new Date(year,month+1,0).getDate(),result=[];for(let i=1;i<=days;i++)result.push(new Date(year,month,i));return result});emptyPrefixDays=(0,resource.EW)(()=>{const view=this.currentViewDate(),firstDayOfMonth=new Date(view.getFullYear(),view.getMonth(),1).getDay();return new Array(firstDayOfMonth)});yearsList=(0,resource.EW)(()=>{const startYear=this.currentViewDate().getFullYear()-5,years=[];for(let i=0;i<12;i++)years.push(startYear+i);return years});toggle(){if(!this.disabled)if(this.isOpen.update(v=>!v),this.isOpen()){if(this.value()){const val=new Date(this.value());this.currentViewDate.set(val)}this.currentView.set("day")}else this.onTouched()}close(){this.isOpen.set(!1),this.onTouched()}prev(e){e.stopPropagation();const d=new Date(this.currentViewDate()),view=this.currentView();"day"===view?d.setMonth(d.getMonth()-1):"month"===view?d.setFullYear(d.getFullYear()-1):"year"===view&&d.setFullYear(d.getFullYear()-12),this.currentViewDate.set(d)}next(e){e.stopPropagation();const d=new Date(this.currentViewDate()),view=this.currentView();"day"===view?d.setMonth(d.getMonth()+1):"month"===view?d.setFullYear(d.getFullYear()+1):"year"===view&&d.setFullYear(d.getFullYear()+12),this.currentViewDate.set(d)}setView(view,e){e&&e.stopPropagation(),this.currentView.set(view)}selectDate(date){this.value.set(date),this.onChange(date),this.isOpen.set(!1)}selectMonth(monthIndex){const d=new Date(this.currentViewDate());d.setMonth(monthIndex),this.currentViewDate.set(d),this.currentView.set("day")}selectYear(year){const d=new Date(this.currentViewDate());d.setFullYear(year),this.currentViewDate.set(d),this.currentView.set("month"),this.currentView.set("month")}isSelected(date){const v=this.value();return!!v&&(v.getDate()===date.getDate()&&v.getMonth()===date.getMonth()&&v.getFullYear()===date.getFullYear())}isToday(date){const today=new Date;return today.getDate()===date.getDate()&&today.getMonth()===date.getMonth()&&today.getFullYear()===date.getFullYear()}onDocumentClick(event){this.elementRef.nativeElement.contains(event.target)||this.close()}writeValue(obj){if(obj instanceof Date)this.value.set(obj);else if("string"==typeof obj){const d=new Date(obj);isNaN(d.getTime())?this.value.set(null):this.value.set(d)}else this.value.set(null)}registerOnChange(fn){this.onChange=fn}registerOnTouched(fn){this.onTouched=fn}setDisabledState(isDisabled){this.disabled=isDisabled}static ctorParameters=()=>[{type:debug_node.aKT},{type:common_module.vh}];static propDecorators={label:[{type:debug_node.pde}],variant:[{type:debug_node.pde}],error:[{type:debug_node.pde}],disabled:[{type:debug_node.pde}],onDocumentClick:[{type:debug_node.Z$l,args:["document:click",["$event"]]}]}};DatepickerComponent=(0,tslib_es6.Cg)([(0,debug_node.uAl)({selector:"app-datepicker",standalone:!0,imports:[common_module.MD,floating_input_component.Y,common_module.vh],providers:[{provide:fesm2022_forms.kq,useExisting:(0,root_effect_scheduler.Rfq)(()=>DatepickerComponent),multi:!0},common_module.vh],template:'<div class="datepicker-container" (clickOutside)="close()">\r\n\r\n  \x3c!-- Trigger Input --\x3e\r\n  <div class="datepicker-trigger" (click)="toggle()">\r\n    <app-floating-input [label]="label" [value]="formattedValue()" [variant]="variant" [disabled]="disabled"\r\n      [readonly]="true" [error]="error" class="pointer-events-none"></app-floating-input>\r\n\r\n    \x3c!-- Custom Trigger Icon --\x3e\r\n    <button type="button" class="calendar-icon-btn text-gray-400" tabindex="-1">\r\n      <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none"\r\n        stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">\r\n        <rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect>\r\n        <line x1="16" y1="2" x2="16" y2="6"></line>\r\n        <line x1="8" y1="2" x2="8" y2="6"></line>\r\n        <line x1="3" y1="10" x2="21" y2="10"></line>\r\n        <path d="M8 14h.01"></path>\r\n        <path d="M12 14h.01"></path>\r\n        <path d="M16 14h.01"></path>\r\n        <path d="M8 18h.01"></path>\r\n        <path d="M12 18h.01"></path>\r\n        <path d="M16 18h.01"></path>\r\n      </svg>\r\n    </button>\r\n  </div>\r\n\r\n  \x3c!-- Popup Calendar --\x3e\r\n  @if (isOpen()) {\r\n  <div class="datepicker-popup">\r\n    \x3c!-- Header --\x3e\r\n    \x3c!-- Header --\x3e\r\n    <div class="calendar-header">\r\n      <button class="nav-btn flex items-center justify-center p-1 hover:bg-gray-100 rounded-full transition-colors"\r\n        (click)="prev($event)">\r\n        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none"\r\n          stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">\r\n          <path d="m15 18-6-6 6-6" />\r\n        </svg>\r\n      </button>\r\n\r\n      <div class="current-month font-semibold flex gap-1">\r\n        \x3c!-- Month Button --\x3e\r\n        <button type="button" class="px-2 py-1 rounded hover:bg-gray-100 font-semibold text-sm transition-colors"\r\n          (click)="setView(\'month\', $event)">\r\n          {{ currentViewDate() | date:\'MMMM\' }}\r\n        </button>\r\n        \x3c!-- Year Button --\x3e\r\n        <button type="button" class="px-2 py-1 rounded hover:bg-gray-100 font-semibold text-sm transition-colors"\r\n          (click)="setView(\'year\', $event)">\r\n          {{ currentViewDate() | date:\'yyyy\' }}\r\n        </button>\r\n      </div>\r\n\r\n      <button class="nav-btn flex items-center justify-center p-1 hover:bg-gray-100 rounded-full transition-colors"\r\n        (click)="next($event)">\r\n        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none"\r\n          stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">\r\n          <path d="m9 18 6-6-6-6" />\r\n        </svg>\r\n      </button>\r\n    </div>\r\n\r\n    \x3c!-- Day Grid (Default) --\x3e\r\n    @if (currentView() === \'day\') {\r\n    <div class="calendar-grid">\r\n      \x3c!-- Weekdays --\x3e\r\n      @for (day of weekDays; track day) {\r\n      <div class="weekday-label text-xs text-gray-500 font-medium text-center py-1">{{ day }}</div>\r\n      }\r\n\r\n      \x3c!-- Empty Slots --\x3e\r\n      @for (empty of emptyPrefixDays(); track $index) {\r\n      <div class="calendar-day empty"></div>\r\n      }\r\n\r\n      \x3c!-- Days --\x3e\r\n      @for (day of daysInMonth(); track $index) {\r\n      <div class="calendar-day" [class.today]="isToday(day)" [class.selected]="isSelected(day)"\r\n        (click)="selectDate(day)">\r\n        {{ day.getDate() }}\r\n      </div>\r\n      }\r\n    </div>\r\n    }\r\n\r\n    \x3c!-- Month Grid --\x3e\r\n    @if (currentView() === \'month\') {\r\n    <div class="month-grid">\r\n      @for (month of months; track $index) {\r\n      <button type="button" class="calendar-option" [class.selected]="currentViewDate().getMonth() === $index"\r\n        (click)="selectMonth($index)">\r\n        {{ month.slice(0, 3) }}\r\n      </button>\r\n      }\r\n    </div>\r\n    }\r\n\r\n    \x3c!-- Year Grid --\x3e\r\n    @if (currentView() === \'year\') {\r\n    <div class="year-grid">\r\n      @for (year of yearsList(); track year) {\r\n      <button type="button" class="calendar-option" [class.selected]="currentViewDate().getFullYear() === year"\r\n        (click)="selectYear(year)">\r\n        {{ year }}\r\n      </button>\r\n      }\r\n    </div>\r\n    }\r\n  </div>\r\n  }\r\n</div>',styles:[datepicker_componentngResource_default()]})],DatepickerComponent);const ui_datepicker_stories={title:"2. Molecules/Datepicker",component:DatepickerComponent,decorators:[(0,dist.Iz)({imports:[fesm2022_forms.YN]})],tags:["autodocs"]},Default={render:()=>({template:'<app-datepicker label="Fecha"></app-datepicker>'})},WithLabel={render:()=>({template:'<app-datepicker label="Fecha de nacimiento"></app-datepicker>'})},Disabled={render:()=>({template:'<app-datepicker label="Fecha bloqueada" [disabled]="true"></app-datepicker>'})},InForm={render:()=>({template:'\n      <div style="max-width: 300px; display: flex; flex-direction: column; gap: 1rem;">\n        <app-datepicker label="Fecha de inicio"></app-datepicker>\n        <app-datepicker label="Fecha de fin"></app-datepicker>\n      </div>\n    '})},__namedExportsOrder=["Default","WithLabel","Disabled","InForm"];Default.parameters={...Default.parameters,docs:{...Default.parameters?.docs,source:{originalSource:'{\n  render: () => ({\n    template: `<app-datepicker label="Fecha"></app-datepicker>`\n  })\n}',...Default.parameters?.docs?.source}}},WithLabel.parameters={...WithLabel.parameters,docs:{...WithLabel.parameters?.docs,source:{originalSource:'{\n  render: () => ({\n    template: `<app-datepicker label="Fecha de nacimiento"></app-datepicker>`\n  })\n}',...WithLabel.parameters?.docs?.source}}},Disabled.parameters={...Disabled.parameters,docs:{...Disabled.parameters?.docs,source:{originalSource:'{\n  render: () => ({\n    template: `<app-datepicker label="Fecha bloqueada" [disabled]="true"></app-datepicker>`\n  })\n}',...Disabled.parameters?.docs?.source}}},InForm.parameters={...InForm.parameters,docs:{...InForm.parameters?.docs,source:{originalSource:'{\n  render: () => ({\n    template: `\n      <div style="max-width: 300px; display: flex; flex-direction: column; gap: 1rem;">\n        <app-datepicker label="Fecha de inicio"></app-datepicker>\n        <app-datepicker label="Fecha de fin"></app-datepicker>\n      </div>\n    `\n  })\n}',...InForm.parameters?.docs?.source}}}}}]);